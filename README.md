# Gophermart

Gophermart ‚Äî —ç—Ç–æ HTTP API —Å–µ—Ä–≤–∏—Å –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Go.  
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–æ–≤, –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –±–æ–Ω—É—Å—ã –∏ —Å–ø–∏—Å—ã–≤–∞—Ç—å –∏—Ö.  
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å PostgreSQL, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, gzip-—Å–∂–∞—Ç–∏–µ, –º–∏–¥–ª–≤–∞—Ä—ã –∏ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã.

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üì¶ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–º–µ—Ä–æ–≤ –∑–∞–∫–∞–∑–æ–≤ (—Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –õ—É–Ω–∞)
- üí∞ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∏ —Å–ø–∏—Å–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤
- üóÇ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL
- üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫—É–∫–∏
- üß™ –ü–æ–∫—Ä—ã—Ç–∏–µ –ª–æ–≥–∏–∫–∏ —Ç–µ—Å—Ç–∞–º–∏
- üìâ –°–∂–∞—Ç–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ gzip
- üîå –í–∞–ª–∏–¥–∞—Ü–∏—è, –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
internal/
‚îú‚îÄ‚îÄ app           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ handlers      # HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îú‚îÄ‚îÄ service       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ storage       # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (PostgreSQL + sqlc)
‚îú‚îÄ‚îÄ validation    # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ middleware    # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, gzip
‚îú‚îÄ‚îÄ db            # SQL-—Å–∫—Ä–∏–ø—Ç—ã –∏ sqlc-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ mocks         # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
``` bash
git clone https://github.com/NailUsmanov/gophermart.git
cd gophermart
```

### 2. –°–æ–∑–¥–∞–π .env —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
DATABASE_DSN=postgres://user:password@localhost:5432/gophermart?sslmode=disable
RUN_ADDRESS=:8080

### 3. –ü–æ–¥–Ω–∏–º–∏ PostgreSQL (—á–µ—Ä–µ–∑ docker-compose, –Ω–∞–ø—Ä–∏–º–µ—Ä)
docker-compose up -d

### 4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)

### 5. –°–æ–±–µ—Ä–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
go test ./...

üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
	‚Ä¢	Go 1.21+
	‚Ä¢	PostgreSQL
	‚Ä¢	sqlc (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –ø–æ SQL)
	‚Ä¢	gorilla/mux
	‚Ä¢	zap (–ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
	‚Ä¢	testify + gomock (—Ç–µ—Å—Ç—ã –∏ –º–æ–∫–∏)

## üìé API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (—á–∞—Å—Ç–∏—á–Ω–æ)

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                             | –û–ø–∏—Å–∞–Ω–∏–µ                |
|--------|----------------------------------|--------------------------|
| POST   | `/api/user/register`            | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è             |
| POST   | `/api/user/login`               | –õ–æ–≥–∏–Ω                   |
| POST   | `/api/user/orders`              | –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞  |
| GET    | `/api/user/orders`              | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤|
| GET    | `/api/user/balance`             | –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å          |
| POST   | `/api/user/balance/withdraw`    | –°–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤         |
| GET    | `/api/user/withdrawals`         | –ò—Å—Ç–æ—Ä–∏—è —Å–ø–∏—Å–∞–Ω–∏–π        |
 


